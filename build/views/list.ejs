<%- include('assets/navbar') %> <%- include('assets/header') %>

<div class="row" style="justify-content: center">
  <div class="col-sm-6 mt-5">
    <h2 class="alert alert-secondary text-center">List Of Student</h2>

    <form class="d-flex">
      <input 
      name="search" type="search" class="form-control me-2" placeholder="Search" aria-label="Search" aria-describedby="search-addon" autocomplete="off">
      <button class="btn btn-outline-dark" type="submit">Search</button>
    </form>

    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Age</th>
          <th scope="col">Fees</th>
          <th scope="col">MobNumber</th>
          <th scope="col">Edit</th>
          <th scope="col">Delete</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <tr>
            <% data.forEach((item,i)=>{ %>
          <tr>
          <td><%= (i+1) + ((current-1)*5) %></td>
          <td><%= item.name %></td>
          <td><%= item.email %></td>
          <td><%= item.age %></td>
          <td><%= item.fees %></td>
          <td><%= item.number %></5></td>
          <td>
            <a href="/admin/edit/<%= item.id %>">
              <button type="button" class="btn btn-outline-info btn-sm">
                Edit
              </button>
            </a>
          </td>
          <td>
            <a href="/admin/delete/<%= item.id %>">
              <button type="button" class="btn btn-outline-danger btn-sm">
                Delete
              </button>
            </a>
          </td>
          <% }) %>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<% if (pages > 1) { %>
  <ul class="pagination" style="justify-content: center;"   >
      <% if (current == 1) { %>
          <li class="page-item disabled"><a class="page-link" aria-disabled="true">Previous</a></li>
      <% } else { %>
          <li><a class="page-link" href="/admin/list/<%=Number(current)-1%>">Previous</a></li>
      <% } %>
      <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
      <% if (i !== 1) { %>
          <li class="page-item"><a class="page-link">...</a></li>
      <% } %>
      <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
          <% if (i == current) { %>
              <li class="active"><a class="page-link"><%= i %></a></li>
          <% } else { %>
              <li><a class="page-link" href="/admin/list/<%= i %>"><%= i %></a></li>
          <% } %>
          <% if (i == Number(current) + 4 && i < pages) { %>
              <li class="page-item active" aria-current="page"><a class="page-link">...</a></li>
          <% } %>
      <% } %>
      <% if (current == pages) { %>
          <li class="page-item disabled"><a class="page-link">Next</a></li>
      <% } else { %>
          <li class="page-item"><a class="page-link" href="/admin/list/<%= Number(current)+1 %>">Next</a></li>
      <% } %>
  </ul>
<% } %>



<%- include('assets/footer') %>
